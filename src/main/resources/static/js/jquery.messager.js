( function(jQuery) {	var _msg = {},		getStoreColor = function(fix){			fix=fix||0;			var s = elsDeskTop.loginStore.shemeType||{},			r = s.r,g= s.g,b= s.b,a= s.a;			if(r&&g&&b&&a)return 'rgba('+[parseInt(r)+fix,parseInt(g)+fix,parseInt(b)+fix,a].join()+')';			else return '#565656';		};	_msg.version = '@1.5';	_msg.title = jsLang.i18n_js_notice||'信息提示';	_msg.time = 4000;	_msg.anims = {		'type' :'slide',		'speed' :600	};	_msg.timer1 = -1;	_msg.inits = function(title, elm) {		_msg.tray = $('#taskBlock').find('.tray-msg');		_msg.tray.click(function(){			if(_msg.time<=0)_msg.show(0,0,5000);			else _msg.close();		});		if (_msg.$el) {return _msg;}		_msg.contentDom =elm;		var stopTime = function(){			_msg.stopeTimer = true;		};		var startTime = function(){			_msg.stopeTimer = false;		};		var listDom =definedDom('div',{			class 		: 'message-scroll',			css 			: { 'max-height' : '200px' }		});		var msgContent = definedDom('div',{			id 		: 'message_content',			css : {				'font-size'						: '12px',				'text-align'					: 'left',				'overflow'						: 'hidden'			},			children:listDom		});		var $m =definedDom('div', {			onmouseenter:stopTime,			onmouseleave:startTime,			addMsg : function(elm){				listDom.appendChild(definedDom(elm));			},			css:{				'z-index'					: 100,				'width'						: '360px',				'position'					: 'absolute',				'bottom'						: '0',				'right'							: '0',				'overflow'					: 'hidden',				'border-radius'			: '2px 0 0 0',				'box-shadow'				: '-1px 2px 6px rgba(0, 0, 0, 0.37)',				'border-top'				: '0'			},			children:[				 {	tag	: 'div',					css : {						'width'						: '100%',						'height'						: '25px',						'font-size'					: '12px',						'overflow'					: 'hidden'					},					children:	[						{	tag		: 'span',							id			: 'message_close',							text		: 'x',							css:{								'float'							: 'right',								'padding'					: '5px 0 5px 0',								'width'						: '16px',								'color'							: ' white',								'font-size'					: '12px',								'font-weight'				: 'bold',								'text-align'				: 'center',								'cursor'						: 'pointer',								'overflow'					: 'hidden'							}						},						{	tag		:'div',							text		: title,							class	: 'js-message-bar',							css:{								'height'						: '27px',								'background'				:   getStoreColor() + ' url(./theme/default/images/bg_a.png) repeat-x 0 0',								'background-size'		: '100% 80px',								'border-bottom'		: '1px solid '+getStoreColor(+2),								'text-shadow'			: '0px 1px 1px #0E0E0E',								'color'							: '#fff',								'line-height'				: '24px',								'padding-left'			: '10px'							}						},						{tag:'div',css:{'clear':'both'}}					]				},				{	tag	: 'div',					css : {						'padding-bottom'		: '5px',						'border-top'				: 'none',						'width'						: '100%',						'height'						: 'auto',						'font-size'					: '12px',						'background'				: '#ffffff'					},					children:msgContent				}			]		});		_msg.contentDom=listDom;		$m = $($m);		$(document.body).prepend($m);		_msg.$el = $m;		$m.find("#message_close").click( function() {			setTimeout(_msg.close, 1);		});		$m.find("#message").hover( function() {			clearTimeout(_msg.timer1);			_msg.timer1 = null;		}, function() {			if (_msg.time > 0)_msg.timer1 = setTimeout(_msg.close, _msg.time);});		$(window).scroll(				function() {					var bottomHeight =  "-"+document.documentElement.scrollTop;					$m.css("bottom", bottomHeight + "px");				});		return _msg;	};	_msg.show = function(title, elm, time) {		var old = Date.now();		if (!_msg.$el) {			if (title == 0 || !title)title = _msg.title;			_msg.inits(title, elm);		}		_msg.$el.css('margin-bottom', !localStorage.getItem('tbp')&&30||0);		if(elm)_msg.$el[0].addMsg(elm);		// 没有新内容不弹出		if(elm instanceof  Array &&elm.length===0)return _msg;		if(_msg.contentDom&&_msg.contentDom.childNodes.length){			_msg.tray.show();		}else return _msg;		if (time >= 0) _msg.time = time;		switch (_msg.anims.type) {		case 'slide':			_msg.$el.slideDown(_msg.anims.speed);			break;		case 'fade':			_msg.$el.fadeIn(_msg.anims.speed);			break;		case 'show':			_msg.$el.show(_msg.anims.speed);			break;		default:			_msg.$el.slideDown(_msg.anims.speed);			break;		}		var bottomHeight =  "-"+document.documentElement.scrollTop;		_msg.$el.css("bottom", bottomHeight + "px");		var t=0;		var checkClose = function(){			if(!_msg.stopeTimer)_msg.time = _msg.time - Date.now() + old;			else {old+=300;}			if(_msg.time<=0){				clearInterval(t);				_msg.close();			}		};		t = setInterval(checkClose,300);		return _msg;	};	_msg.anim = function(type, speed) {		if (_msg.$el) {return _msg;}		if (type != 0 && type)			_msg.anims.type = type;		if (speed != 0 && speed) {			switch (speed) {			case 'slow':				break;			case 'fast':				_msg.anims.speed = 200;				break;			case 'normal':				_msg.anims.speed = 400;				break;			default:				_msg.anims.speed = speed;			}		}		return _msg;	};	_msg.close = function() {		_msg.time=-1;		if (!_msg.$el) {return _msg;}		switch (_msg.anims.type) {		case 'slide':			_msg.$el.slideUp(_msg.anims.speed);			break;		case 'fade':			_msg.$el.fadeOut(_msg.anims.speed);			break;		case 'show':			_msg.$el.hide(_msg.anims.speed);			break;		default:			_msg.$el.slideUp(_msg.anims.speed);			break;		}		if(!_msg.contentDom||_msg.contentDom.childNodes.length===0){			_msg.tray.hide();		}		return _msg;	};	jQuery.Messager = _msg;	return jQuery;})(jQuery);